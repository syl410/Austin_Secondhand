<!-- ejs for the page of creating a new used item -->

<% include ./partials/header %>
    <script>
        // check uploaded image size and image format
        // it should not be greater than 5MB
        // it should be png, pjep, or jpg
        $(document).ready(function(){
            $("#new_post_btn").attr('disabled', false);
            $('#picture').on('change', function() {
                // check file size
                if(this.files[0].size > 5000000) {
                    $("#new_post_btn").attr('disabled', true);
                    $("#size_reminder").css("color", "red");
                } else {
                    $("#new_post_btn").attr('disabled', false);
                    $("#size_reminder").css("color", "grey");
                }
                // check file type
                var fileType = this.files[0]['type'];
                var validImageTypes = ['image/jpeg', 'image/jpg',  'image/png'];
                if(!validImageTypes.includes(fileType)) {
                    $("#new_post_btn").attr('disabled', true);
                    $("#format_reminder").css("color", "red");
                } else {
                    $("#new_post_btn").attr('disabled', false);
                    $("#format_reminder").css("color", "grey");
                }
            });
        });
    </script>

    <div class="row">
        <h1 style="text-align: center">Post an item to sell</h1>
        <div style="width: 30%; margin: 25px auto;">
            <form action="/" method="POST" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input class="form-control" type="text" name="name" id="name" placeholder="Used iPhone X" required maxlength="32">
                </div>
                <div class="form-group">
                    <label for="image">Upload photo</label>
                    <input id="picture" type="file" name="image" accept="image/*" required>
                    <small id="size_reminder" class="greyColor">Photo size should be less then 5MB.</small>
                    <br>
                    <small id="format_reminder" class="greyColor">Photo format should be png, jpeg, or jpg.</small>
                </div>
                <div class="form-group">
                    <label for="cost">Price</label>
                    <input class="form-control" type="number" name="cost" id="cost" placeholder="9.99" step="0.01" min="0" max="1000000" required>
                </div>
                <div class="form-group">
                    <label for="location">Location</label>
                    <input class="form-control" type="text" name="location" id="location" placeholder="Street name, Austin, TX (no need detailed info)" maxlength="64" required>
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <input class="form-control" type="text" name="description" id="description" placeholder="descripe your item" maxlength="256" required>
                </div>
                <div class="form-group">
                    <label for="category">Category</label>
                    <br>
                    <select required type="text" name="category" id="category" style="color:black">
                        <option value="">Choose ...</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Furniture">Furniture</option>
                        <option value="Appliances">Appliances</option>
                        <option value="Automotive">Automotive</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <br>
                <div class="form-group">
                    <button id="new_post_btn" class="btn btn-lg btn-success btn-block boldWord">Post!</button>
                </div>
            </form>
            <a href="/" class="greenColor" >Go Home Page</a>
        </div>
    </div>
<% include ./partials/footer %>

